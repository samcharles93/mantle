# Mantle Environment Configuration

# Application Environment (development, production, etc.)
ENV=development

# Go build experiment flags (e.g., simd)
GOEXPERIMENT=simd

# Directory where models are searched for by 'mantle run'
# Default: /work/models/mcf (derived from Taskfile vars)
MANTLE_MODELS_DIR=/work/models/mcf

# Default output directory for 'mantle pack'
# Default: /work/models/mcf (derived from Taskfile vars)
MANTLE_PACK_OUT_DIR=/work/models/mcf

# Path to CUDA installation (required for CUDA build if nvcc is not in PATH)
# CUDA_HOME=/usr/local/cuda

# --- CUDA Backend ---

# Print CUDA performance counters (MatVec/RMSNorm calls, bytes transferred) after generation
MANTLE_CUDA_TRACE=false

# Fused RMSNorm + MatVec kernel (single kernel for norm + matrix-vector multiply)
MANTLE_CUDA_FUSE=false

# Use native quantized MatVec CUDA kernels (Q4/K4/INT8) instead of dequantizing to FP16
MANTLE_CUDA_QUANT_KERNEL=false

# Use custom CUDA softmax kernel for attention scores
MANTLE_CUDA_ATTN_SOFTMAX=false

# Use legacy stream synchronization (async D2H + explicit stream sync)
MANTLE_CUDA_LEGACY_SYNC=false

# Set to true to DISABLE fused QKV projection (falls back to three separate MatVec calls)
MANTLE_CUDA_DISABLE_QKV_FASTPATH=false

# Set to true to DISABLE fused FFN block (falls back to separate MatVec + CPU activation)
MANTLE_CUDA_DISABLE_FFN_FASTPATH=false

# Set to true to DISABLE on-device attention inner loop (falls back to CPU attention)
MANTLE_CUDA_DISABLE_ATTN_INNER_FASTPATH=false
